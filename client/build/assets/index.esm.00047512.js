import{a as Y,f as T,u as ie,o as ce,d as V,aG as ue,R as k,b as F,r as o,n as de,ac as be,aH as L,aI as b}from"./index.884ef809.js";import{u as fe}from"./ontimeConfig.8353ce02.js";import{u as me}from"./index.esm.e4609593.js";import{m as P}from"./index.esm.36fc65dd.js";function pe(s){return"current"in s}var Z=()=>typeof window<"u";function ve(){var n;const s=navigator.userAgentData;return(n=s==null?void 0:s.platform)!=null?n:navigator.platform}var Ee=s=>Z()&&s.test(navigator.vendor),ge=s=>Z()&&s.test(ve()),xe=()=>ge(/mac|iphone|ipad|ipod/i),Ce=()=>xe()&&Ee(/apple/i);function ye(s){const{ref:n,elements:r,enabled:c}=s,u=()=>{var l;var t;return(l=(t=n.current)==null?void 0:t.ownerDocument)!=null?l:document};fe(u,"pointerdown",t=>{if(!Ce()||!c)return;const l=t.target,y=(r!=null?r:[n]).some(v=>{const f=pe(v)?v.current:v;return(f==null?void 0:f.contains(l))||f===l});u().activeElement===l&&y&&(t.preventDefault(),l.focus())})}var[he,O]=Y({name:"EditableStylesContext",errorMessage:`useEditableStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Editable />" `}),[Pe,U]=Y({name:"EditableContext",errorMessage:"useEditableContext: context is undefined. Seems you forgot to wrap the editable components in `<Editable />`"});function X(s,n){return s?s===n||s.contains(n):!1}function ke(s={}){const{onChange:n,onCancel:r,onSubmit:c,value:u,isDisabled:t,defaultValue:l,startWithEditView:_,isPreviewFocusable:y=!0,submitOnBlur:v=!0,selectAllOnFocus:f=!0,placeholder:E,onEdit:w,...$}=s,ee=Boolean(_&&!t),[d,K]=o.exports.useState(ee),[i,N]=me({defaultValue:l||"",value:u,onChange:n}),[M,z]=o.exports.useState(i),g=o.exports.useRef(null),te=o.exports.useRef(null),G=o.exports.useRef(null),A=o.exports.useRef(null),W=o.exports.useRef(null);ye({ref:g,enabled:d,elements:[A,W]});const B=!d&&!t;de(()=>{var e,a;d&&((e=g.current)==null||e.focus(),f&&((a=g.current)==null||a.select()))},[]),be(()=>{var e,a,p;if(!d){(e=G.current)==null||e.focus();return}(a=g.current)==null||a.focus(),f&&((p=g.current)==null||p.select()),w==null||w()},[d,w,f]);const S=o.exports.useCallback(()=>{B&&K(!0)},[B]),h=o.exports.useCallback(()=>{z(i)},[i]),m=o.exports.useCallback(()=>{K(!1),N(M),r==null||r(M)},[r,N,M]),x=o.exports.useCallback(()=>{K(!1),z(i),c==null||c(i)},[i,c]),D=o.exports.useCallback(e=>{N(e.currentTarget.value)},[N]),q=o.exports.useCallback(e=>{const a=e.key,C={Escape:m,Enter:R=>{!R.shiftKey&&!R.metaKey&&x()}}[a];C&&(e.preventDefault(),C(e))},[m,x]),J=o.exports.useCallback(e=>{const a=e.key,C={Escape:m}[a];C&&(e.preventDefault(),C(e))},[m]),H=i.length===0,I=o.exports.useCallback(e=>{var Q;const a=e.currentTarget.ownerDocument,p=(Q=e.relatedTarget)!=null?Q:a.activeElement,C=X(A.current,p),R=X(W.current,p);!C&&!R&&(v?x():m())},[v,x,m]),ne=o.exports.useCallback((e={},a=null)=>{const p=B&&y?0:void 0;return{...e,ref:P(a,te),children:H?E:i,hidden:d,"aria-disabled":L(t),tabIndex:p,onFocus:b(e.onFocus,S,h)}},[t,d,B,y,H,S,h,E,i]),ae=o.exports.useCallback((e={},a=null)=>({...e,hidden:!d,placeholder:E,ref:P(a,g),disabled:t,"aria-disabled":L(t),value:i,onBlur:b(e.onBlur,I),onChange:b(e.onChange,D),onKeyDown:b(e.onKeyDown,q),onFocus:b(e.onFocus,h)}),[t,d,I,D,q,h,E,i]),oe=o.exports.useCallback((e={},a=null)=>({...e,hidden:!d,placeholder:E,ref:P(a,g),disabled:t,"aria-disabled":L(t),value:i,onBlur:b(e.onBlur,I),onChange:b(e.onChange,D),onKeyDown:b(e.onKeyDown,J),onFocus:b(e.onFocus,h)}),[t,d,I,D,J,h,E,i]),se=o.exports.useCallback((e={},a=null)=>({"aria-label":"Edit",...e,type:"button",onClick:b(e.onClick,S),ref:P(a,G),disabled:t}),[S,t]),le=o.exports.useCallback((e={},a=null)=>({...e,"aria-label":"Submit",ref:P(W,a),type:"button",onClick:b(e.onClick,x),disabled:t}),[x,t]),re=o.exports.useCallback((e={},a=null)=>({"aria-label":"Cancel",id:"cancel",...e,ref:P(A,a),type:"button",onClick:b(e.onClick,m),disabled:t}),[m,t]);return{isEditing:d,isDisabled:t,isValueEmpty:H,value:i,onEdit:S,onCancel:m,onSubmit:x,getPreviewProps:ne,getInputProps:ae,getTextareaProps:oe,getEditButtonProps:se,getSubmitButtonProps:le,getCancelButtonProps:re,htmlProps:$}}var we=T(function(n,r){const c=ie("Editable",n),u=ce(n),{htmlProps:t,...l}=ke(u),{isEditing:_,onSubmit:y,onCancel:v,onEdit:f}=l,E=V("chakra-editable",n.className),w=ue(n.children,{isEditing:_,onSubmit:y,onCancel:v,onEdit:f});return k.createElement(Pe,{value:l},k.createElement(he,{value:c},k.createElement(F.div,{ref:r,...t,className:E},w)))});we.displayName="Editable";var j={fontSize:"inherit",fontWeight:"inherit",textAlign:"inherit",bg:"transparent"},Se=T(function(n,r){const{getInputProps:c}=U(),u=O(),t=c(n,r),l=V("chakra-editable__input",n.className);return k.createElement(F.input,{...t,__css:{outline:0,...j,...u.input},className:l})});Se.displayName="EditableInput";var _e=T(function(n,r){const{getTextareaProps:c}=U(),u=O(),t=c(n,r),l=V("chakra-editable__textarea",n.className);return k.createElement(F.textarea,{...t,__css:{outline:0,...j,...u.textarea},className:l})});_e.displayName="EditableTextarea";var Ne=T(function(n,r){const{getPreviewProps:c}=U(),u=O(),t=c(n,r),l=V("chakra-editable__preview",n.className);return k.createElement(F.span,{...t,__css:{cursor:"text",display:"inline-block",...j,...u.preview},className:l})});Ne.displayName="EditablePreview";export{we as E,Ne as a,Se as b};
