import{aq as E,r as l,aj as A,g as s,j as e,A as u,m as v}from"./index.884ef809.js";import{P as B,_ as I}from"./Paginator.19594edc.js";import{u as _,m as L,N as R}from"./useRuntimeStylesheet.cce38e2c.js";import{t as h,T as N}from"./animation.0a5ecaf4.js";import{f as $}from"./dateConfig.7f97a25b.js";import{u as q}from"./utils.71c85371.js";import{p as i}from"./index.a719180e.js";import{g as D}from"./eventsManager.fbf10d53.js";import"./Empty.a3aa49f7.js";import"./index.esm.36fc65dd.js";import"./useFullscreen.e5cbfcf7.js";import"./index.641207f5.js";const M={showSeconds:!0,format:"hh:mm:ss a"};function V(b){const{publ:c,title:t,time:n,backstageEvents:m,selectedId:f,general:a,viewSettings:d}=b,{shouldRender:x}=_((d==null?void 0:d.overrideStyles)&&E),[g,w]=l.exports.useState(null),[p,k]=l.exports.useState(0),[y,j]=l.exports.useState(0),[S]=q(L);if(l.exports.useEffect(()=>{document.title="ontime - Backstage Screen"},[]),l.exports.useEffect(()=>{if(m==null)return;const o=D(m);w(o)},[m]),!x)return null;const T=c.text!==""&&c.visible;let r;n.running===null?r="- - : - -":(r=$(Math.abs(n.running),!0),n.isNegative&&(r=`-${r}`));const P=A(n.clock,M);return s("div",{className:`backstage ${S?"mirror":""}`,children:[e(R,{}),e("div",{className:"event-title",children:a.title}),e(u,{children:t.showNow&&e(v.div,{className:"event now",variants:h,initial:"hidden",animate:"visible",exit:"exit",children:e(N,{label:"Now",type:"now",title:t.titleNow,subtitle:t.subtitleNow,presenter:t.presenterNow})},"now")}),e(u,{children:t.showNext&&e(v.div,{className:"event next",variants:h,initial:"hidden",animate:"visible",exit:"exit",children:e(N,{label:"Next",type:"next",title:t.titleNext,subtitle:t.subtitleNext,presenter:t.presenterNext})},"next")}),s("div",{className:"today-container",children:[s("div",{className:"today-header-block",children:[e("div",{className:"label",children:"Today"}),e("div",{className:"nav",children:p>1&&[...Array(p).keys()].map(o=>e("div",{className:o===y?"nav-item nav-item--selected":"nav-item"},o))})]}),e(B,{selectedId:f,events:g,isBackstage:!0,setCurrentPage:j,setPageNumber:k})]}),s("div",{className:T?"public-container":"public-container public-container--hidden",children:[e("div",{className:"label",children:"Public message"}),e("div",{className:"message",children:c.text})]}),s("div",{className:"clock-container",children:[e("div",{className:"label",children:"Time Now"}),e("div",{className:"clock",children:P})]}),s("div",{className:"timer-container",children:[e("div",{className:"label",children:"Stage Timer"}),e("div",{className:"timer",children:r})]}),s("div",{className:"info",children:[e("div",{className:"label",children:"Info"}),e("div",{className:"info__message",children:a.backstageInfo}),e("div",{className:"qr",children:a.url!=null&&a.url!==""&&e(I,{value:a.url,size:window.innerWidth/12,level:"L"})})]})]})}V.propTypes={publ:i.exports.object,title:i.exports.object,time:i.exports.object,backstageEvents:i.exports.object,selectedId:i.exports.string,general:i.exports.object,viewSettings:i.exports.object};export{V as default};
